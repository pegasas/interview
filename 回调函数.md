# 回调函数

CALLBACK，即回调函数，是一个通过函数指针调用的函数。如果你把函数的指针（地址）
作为参数传递给另一个函数，当这个指针被用为调用它所指向的函数时，
我们就说这是回调函数。回调函数不是由该函数的实现方直接调用，而是在特定的事件
或条件发生时由另外的一方调用的，用于对该事件或条件进行响应。

# 机制

⑴定义一个回调函数；
⑵提供函数实现的一方在初始化的时候，将回调函数的函数指针注册给调用者；
⑶当特定的事件或条件发生的时候，调用者使用函数指针调用回调函数对事件进行处理。

# 回调函数作用

回调函数就是允许用户把需要调用的函数的指针作为参数传递给一个函数，
以便该函数在处理相似事件的时候可以灵活的使用不同的方法。
因为可以把调用者与被调用者分开，所以调用者不关心谁是被调用者。
它只需知道存在一个具有特定原型和限制条件的被调用函数。简而言之，
回调函数就是允许用户把需要调用的函数的指针作为参数传递给一个函数，
以便该函数在处理相似事件的时候可以灵活的使用不同的方法。

先假设有这样一种情况：我们要编写一个库，
它提供了某些排序算法的实现（如冒泡排序、快速排序、shell排序、shake排序等等），
为了能让库更加通用，不想在函数中嵌入排序逻辑，而让使用者来实现相应的逻辑；
或者，能让库可用于多种数据类型（int、float、string），此时，该怎么办呢？
可以使用函数指针，并进行回调。

回调可用于通知机制。例如，有时要在A程序中设置一个计时器，每到一定时间，
A程序会得到相应的通知，但通知机制的实现者对A程序一无所知。那么，
就需一个具有特定原型的函数指针进行回调，通知A程序事件已经发生。实际上，
API使用一个回调函数SetTimer()来通知计时器。如果没有提供回调函数，
它还会把一个消息发往程序的消息队列。
另一个使用回调机制的API函数是EnumWindow（），它枚举屏幕上所有的顶层窗口，
每个窗口都可以通过它调用另一个程序提供的函数，并传递窗口的处理程序。
例如：如果被调用者返回一个值，就继续进行迭代；否则，退出。EnumWindow()
并不关心被调用者在何处，也不关心被调用者用它传递的处理程序做了什么，
它只关心返回值，因为基于返回值，它将继续执行或退出。
不管怎么说，回调函数是继承自C语言的。在C++中，
应只在与C代码建立接口或与已有的回调接口打交道时，才使用回调函数。
除了上述情况，在C++中应使用虚拟方法或仿函数（functor），而不是回调函数。
